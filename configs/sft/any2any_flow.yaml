# üåü –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–µ–π Qwen2.5-Omni –º–æ–¥–µ–ª–∏
# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏: text, image, audio, video

model_name_or_path: "Qwen/Qwen2.5-Omni-7B"

# Any2Any –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ model_type)
modalities:
  input: ["text", "image", "audio"]
  output: ["text", "image", "audio"]

# –û–º–Ω–∏–º–æ–¥–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç
dataset: ["quick_any2any_dataset"]
conversation_field: "conversations"
max_seq_length: 2048

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Omni –º–æ–¥–µ–ª–∏
output_dir: "./output/qwen_omni_any2any"
per_device_train_batch_size: 1
gradient_accumulation_steps: 4
num_train_epochs: 1
learning_rate: 1e-5
warmup_steps: 50
max_steps: 100

# LoRA –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
use_peft: true
lora:
  r: 16
  alpha: 32
  dropout: 0.1
  target_modules: ["q_proj", "v_proj", "k_proj", "o_proj"]
  bias: "none"

# –≠–Ω–∫–æ–¥–µ—Ä—ã –¥–ª—è –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏
encoders:
  image:
    model: "openai/clip-vit-base-patch32"
    freeze: true
    tokenizer_type: "discrete"

  audio:
    model: "openai/whisper-base"
    freeze: true
    tokenizer_type: "discrete"

# –î–µ–∫–æ–¥–µ—Ä—ã –¥–ª—è any2any –≤—ã—Ö–æ–¥–Ω—ã—Ö –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π
decoders:
  image:
    model: "runwayml/stable-diffusion-v1-5"
    freeze: false
    
  audio:
    model: "microsoft/speecht5_tts"
    freeze: false

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π
special_tokens:
  image_start: "<img>"
  image_end: "</img>"
  audio_start: "<audio>"
  audio_end: "</audio>"
  video_start: "<video>"
  video_end: "</video>"

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Omni
gradient_checkpointing: true
bf16: true
dataloader_num_workers: 2
remove_unused_columns: false

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging_steps: 10
save_steps: 50
eval_steps: 50
evaluation_strategy: "steps"
report_to: "none"
run_name: "qwen_omni_any2any"

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
save_total_limit: 3
load_best_model_at_end: true
metric_for_best_model: "loss"

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Omni
# trust_remote_code: true (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
# torchvision: required –¥–ª—è –≤–∏–¥–µ–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ 